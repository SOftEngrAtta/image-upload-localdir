<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>image upload</title>
</head>

<body>
    <input type="file" id="file" onchange="uploadImage()">
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</html>


<script>

    function uploadImage(event) {
        var preview = document.querySelector('img'); //selects the query named img
        var file = document.querySelector('input[type=file]').files[0]; //sames as here
        var reader = new FileReader();
        
        

        reader.onloadend = function () {

            data = new FormData();
            data.append('file', reader.result);
            $.ajax({
                url: 'http://localhost:8080/file/image',
                type: "POST",
                data: data,
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (result) {

                }, error: function (error) {

                }
            })
        }

        if (file) {
            reader.readAsDataURL(file); //reads the data as a URL
        }

        //     var data = new FormData(file);
        // data.append('file', file);

        // $.ajax({
        //         url: 'http://localhost:8080/file/image',
        //         type: "POST",
        //         data: data,
        //         enctype: 'multipart/form-data',
        //         processData: false,
        //         contentType: false,
        //         success: function (result) {

        //         }, error: function (error) {

        //         }
        //     })



    }

</script>